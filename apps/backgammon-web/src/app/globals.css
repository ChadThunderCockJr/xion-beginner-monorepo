@import "tailwindcss";

@theme {
  /* ─── Background tiers — green-felt ─── */
  --color-bg-deepest: #040604;
  --color-bg-base: #0A0E08;
  --color-bg-surface: #141A12;
  --color-bg-elevated: #1E241C;
  --color-bg-subtle: #2A3026;

  /* ─── Text hierarchy ─── */
  --color-text-primary: #ECE8E0;
  --color-text-secondary: #B0AAA0;
  --color-text-muted: #787268;
  --color-text-faint: #4A4840;

  /* ─── Accent — dark burgundy ─── */
  --color-gold-primary: #581428;
  --color-gold-light: #6B2D3E;
  --color-gold-dark: #3A0C1A;
  --color-gold-muted: #220C18;
  --color-accent-fg: #ECE8E0;
  --color-text-on-gold: #ECE8E0;

  /* ─── Semantic ─── */
  --color-success: #60A860;
  --color-success-muted: rgba(96, 168, 96, 0.12);
  --color-danger: #CC4444;
  --color-danger-muted: rgba(204, 68, 68, 0.12);
  --color-warning: #FBBF24;
  --color-info: #5888A0;

  /* ─── Burgundy ─── */
  --color-burgundy-primary: #882040;
  --color-burgundy-light: #A83858;
  --color-burgundy-deep: #581428;
  --color-burgundy-faint: #220C18;
  --color-burgundy-accent: #6B2D3E;

  /* ─── Borders ─── */
  --color-border-subtle: #2A3026;
  --color-border-default: #2A3026;
  --color-border-strong: #3A4036;

  /* ─── Analysis gold accent (post-game analysis page) ─── */
  --color-analysis-gold: #D0A848;
  --color-analysis-gold-light: #F0C868;
  --color-analysis-gold-subtle: #988040;
  --color-analysis-gold-faint: rgba(208, 168, 72, 0.12);
  --color-analysis-gold-text: #1A1408;

  /* ─── Fonts ─── */
  --font-display: var(--font-cinzel), "Cinzel", Georgia, serif;
  --font-body: var(--font-josefin), "Josefin Sans", system-ui, -apple-system, sans-serif;
  --font-serif: var(--font-cormorant), "Cormorant Garamond", Georgia, serif;
  --font-mono: var(--font-jetbrains), "JetBrains Mono", ui-monospace, monospace;

  /* ─── Radius ─── */
  --radius-card: 8px;
  --radius-button: 6px;
  --radius-pill: 20px;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  /* ─── Shadows ─── */
  --shadow-card: 0 2px 12px rgba(0, 0, 0, 0.3);
  --shadow-elevated: 0 8px 32px rgba(0, 0, 0, 0.4);
  --shadow-gold: 0 2px 12px rgba(88, 20, 40, 0.3);
  --shadow-glow: 0 0 60px rgba(88, 20, 40, 0.12);

  /* ─── Board colors ─── */
  --color-board-felt-light: #243020;
  --color-board-felt-dark: #1A2818;
  --color-board-border: #4A3F2F;
  --color-board-bar: #2A2118;
  --color-checker-white: #DCD8D0;
  --color-checker-black: #6E1A30;
  --color-checker-white-border: #A8A098;
  --color-checker-black-border: var(--color-burgundy-deep);
  --color-board-point-light: #D4A86A;
  --color-board-point-dark: #8B4513;
  --color-die-white-face: #DCD8D0;
  --color-die-white-stroke: #B8B4AC;
  --color-die-white-dot: #2A2018;
  --color-die-black-face: #6E1A30;
  --color-die-black-stroke: #8A2840;
  --color-die-black-dot: #DCD8D0;
}

/* ═══════════════════════════════════════════
   LIGHT THEME — override CSS variables
   ═══════════════════════════════════════════ */

html.light {
  /* ─── Background tiers — warm parchment ─── */
  --color-bg-deepest: #E8E2D8;
  --color-bg-base: #F5F1EB;
  --color-bg-surface: #FFFFFF;
  --color-bg-elevated: #FFFFFF;
  --color-bg-subtle: #E0DAD0;

  /* ─── Text hierarchy (WCAG AA compliant against #F5F1EB) ─── */
  --color-text-primary: #1A1814;
  --color-text-secondary: #4A4640;
  --color-text-muted: #6B6560;
  --color-text-faint: #8D877C;

  /* ─── Accent — burgundy on light ─── */
  --color-gold-primary: #7A1830;
  --color-gold-light: #8E2C44;
  --color-gold-dark: #5C1024;
  --color-gold-muted: rgba(122, 24, 48, 0.08);
  --color-accent-fg: #FFFFFF;
  --color-text-on-gold: #FFFFFF;

  /* ─── Semantic ─── */
  --color-success: #187518;
  --color-success-muted: rgba(24, 117, 24, 0.1);
  --color-danger: #C03030;
  --color-danger-muted: rgba(192, 48, 48, 0.08);
  --color-warning: #8B6508;
  --color-info: #3070A0;

  /* ─── Burgundy ─── */
  --color-burgundy-primary: #7A1830;
  --color-burgundy-light: #8E2C44;
  --color-burgundy-deep: #F0E8E0;
  --color-burgundy-faint: rgba(122, 24, 48, 0.06);
  --color-burgundy-accent: #8E2C44;

  /* ─── Borders (darkened for visibility against light backgrounds) ─── */
  --color-border-subtle: #C4BCB0;
  --color-border-default: #8E8678;
  --color-border-strong: #766E62;

  /* ─── Analysis gold accent (darkened for light backgrounds, WCAG AA) ─── */
  --color-analysis-gold: #806410;
  --color-analysis-gold-light: #A07818;
  --color-analysis-gold-subtle: #6B5420;
  --color-analysis-gold-faint: rgba(128, 100, 16, 0.10);
  --color-analysis-gold-text: #1A1408;

  /* ─── Shadows ─── */
  --shadow-card: 0 1px 4px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-elevated: 0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-gold: 0 2px 8px rgba(122, 24, 48, 0.12);
  --shadow-glow: 0 0 40px rgba(122, 24, 48, 0.06);

  /* ─── Board colors ─── */
  --color-board-felt-light: #3A6B35;
  --color-board-felt-dark: #2D5A28;
  --color-board-border: #8B7355;
  --color-board-bar: #6B5B45;
  --color-checker-white: #F0EDE5;
  --color-checker-black: #8B2252;
  --color-checker-white-border: #C8C0B4;
  --color-checker-black-border: #6B1A3A;
  --color-board-point-light: #E8C78A;
  --color-board-point-dark: #A0522D;
  --color-die-white-face: #F0EDE5;
  --color-die-white-stroke: #C8C0B4;
  --color-die-white-dot: #2A2018;
  --color-die-black-face: #8B2252;
  --color-die-black-stroke: #A03060;
  --color-die-black-dot: #F0EDE5;
}

/* ═══════════════════════════════════════════
   LUX THEME — chocolate & gold luxury
   ═══════════════════════════════════════════ */

html.lux {
  /* ─── Background tiers — burgundy red ─── */
  --color-bg-deepest: #2A0A16;
  --color-bg-base: #3A0C1A;
  --color-bg-surface: #481220;
  --color-bg-elevated: #581428;
  --color-bg-subtle: #6B2D3E;

  /* ─── Text hierarchy — bright gold ─── */
  --color-text-primary: #E8B84A;
  --color-text-secondary: #D4A843;
  --color-text-muted: #B8922E;
  --color-text-faint: #8A7248;

  /* ─── Accent — gold buttons on burgundy backgrounds ─── */
  --color-gold-primary: #C5973E;
  --color-gold-light: #D4A843;
  --color-gold-dark: #A07828;
  --color-gold-muted: rgba(197, 151, 62, 0.15);
  --color-accent-fg: #2A0A16;
  --color-text-on-gold: #2A0A16;

  /* ─── Semantic ─── */
  --color-success: #60A860;
  --color-success-muted: rgba(96, 168, 96, 0.15);
  --color-danger: #CC4444;
  --color-danger-muted: rgba(204, 68, 68, 0.15);
  --color-warning: #FBBF24;
  --color-info: #5888A0;

  /* ─── Burgundy — lighter for visibility on burgundy bg ─── */
  --color-burgundy-primary: #C5973E;
  --color-burgundy-light: #D4A843;
  --color-burgundy-deep: #6B2D3E;
  --color-burgundy-faint: rgba(197, 151, 62, 0.1);
  --color-burgundy-accent: #B8922E;

  /* ─── Borders ─── */
  --color-border-subtle: #6B2D3E;
  --color-border-default: #7A1830;
  --color-border-strong: #882040;

  /* ─── Font override — calligraphic script ─── */
  --font-display: var(--font-pinyon), "Pinyon Script", "Cormorant Garamond", cursive;

  /* ─── Shadows — gold glow ─── */
  --shadow-card: 0 2px 12px rgba(0, 0, 0, 0.4);
  --shadow-elevated: 0 8px 32px rgba(0, 0, 0, 0.5);
  --shadow-gold: 0 2px 12px rgba(197, 151, 62, 0.25);
  --shadow-glow: 0 0 60px rgba(197, 151, 62, 0.1);

  /* ─── Board colors ─── */
  --color-board-felt-light: #1A3020;
  --color-board-felt-dark: #142818;
  --color-board-border: #C9A84C;
  --color-board-bar: #2A2018;
  --color-checker-white: #F5F0E0;
  --color-checker-black: #800020;
  --color-checker-white-border: #D4C8B0;
  --color-checker-black-border: #600018;
  --color-board-point-light: #C9A84C;
  --color-board-point-dark: #8B6914;
  --color-die-white-face: #F5F0E0;
  --color-die-white-stroke: #D4C8B0;
  --color-die-white-dot: #2A2018;
  --color-die-black-face: #800020;
  --color-die-black-stroke: #A00030;
  --color-die-black-dot: #F5F0E0;
}

/* ─── Lux mode scrollbar ─── */
html.lux ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
}
html.lux ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* ─── Light mode scrollbar ─── */
html.light ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}
html.light ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  /* Override font vars here (not in @theme/:root) so Next.js
     font-class variables (--font-cormorant etc.) are in scope */
  --font-display: var(--font-cormorant), "Cormorant Garamond", Georgia, serif;
  --font-body: var(--font-outfit), "Outfit", system-ui, -apple-system, sans-serif;
  --font-mono: var(--font-jetbrains), "JetBrains Mono", ui-monospace, monospace;
  font-family: var(--font-body);
  background: var(--color-bg-base);
  color: var(--color-text-primary);
  min-height: 100dvh;
  overflow-x: hidden;
}

html.lux body {
  --font-display: var(--font-pinyon), "Pinyon Script", cursive;
}

/* ─── Animations ─── */

@keyframes fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
  animation: fade-in 300ms ease-out;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
.animate-spin {
  animation: spin 1s linear infinite;
}

@keyframes dice-bounce {
  0% { transform: translateY(-12px) rotate(-8deg); opacity: 0; }
  40% { transform: translateY(3px) rotate(3deg); opacity: 1; }
  60% { transform: translateY(-2px) rotate(-1deg); }
  100% { transform: translateY(0) rotate(0); opacity: 1; }
}
.animate-dice {
  animation: dice-bounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes checker-place {
  0% { transform: scale(0.8); opacity: 0.5; }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}
.animate-checker-place {
  animation: checker-place 0.3s ease-out;
}

/* ─── Scrollbar ─── */

::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* ─── Selection & Focus ─── */

::selection {
  background: var(--color-gold-muted);
  color: var(--color-text-primary);
}

:focus-visible {
  outline: 2px solid var(--color-gold-primary);
  outline-offset: 2px;
}

/* ═══════════════════════════════════════════
   LEGACY — kept for existing components
   during migration. Use new Tailwind tokens
   for all new code.
   ═══════════════════════════════════════════ */

.btn-primary {
  background: var(--color-gold-primary);
  color: var(--color-accent-fg);
  font-weight: 600;
  font-size: 15px;
  padding: 14px 20px;
  border-radius: var(--radius-button);
  border: none;
  cursor: pointer;
  transition: background 150ms ease, transform 100ms ease;
}
.btn-primary:hover {
  background: var(--color-gold-light);
}
.btn-primary:active {
  background: var(--color-gold-dark);
  transform: scale(0.98);
}
.btn-primary:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.btn-secondary {
  background: var(--color-bg-surface);
  color: var(--color-text-primary);
  font-weight: 600;
  font-size: 15px;
  padding: 14px 20px;
  border-radius: var(--radius-button);
  border: 1px solid var(--color-bg-subtle);
  cursor: pointer;
  transition: all 150ms ease;
}
.btn-secondary:hover {
  background: var(--color-bg-elevated);
  border-color: var(--color-gold-dark);
  color: var(--color-text-primary);
}
.btn-secondary:active {
  transform: scale(0.98);
}
.btn-secondary:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.btn-danger {
  background: transparent;
  color: var(--color-danger);
  font-weight: 600;
  font-size: 15px;
  padding: 14px 20px;
  border-radius: var(--radius-button);
  border: 1px solid rgba(248, 113, 113, 0.3);
  cursor: pointer;
  transition: all 150ms ease;
}
.btn-danger:hover {
  background: var(--color-danger-muted);
  border-color: rgba(248, 113, 113, 0.5);
}
.btn-danger:active {
  transform: scale(0.98);
}

.input {
  background: var(--color-bg-elevated);
  border: 1.5px solid var(--color-bg-subtle);
  border-radius: var(--radius-button);
  padding: 13px 16px;
  color: var(--color-text-primary);
  font-size: 15px;
  transition: border-color 150ms ease, box-shadow 150ms ease;
  outline: none;
  width: 100%;
}
.input:focus {
  border-color: var(--color-gold-primary);
}
.input::placeholder {
  color: var(--color-text-faint);
}

.panel {
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border-subtle);
  border-radius: var(--radius-lg);
}

.font-display {
  font-family: var(--font-display);
}

.font-mono {
  font-family: var(--font-mono);
}

/* ═══════════════════════════════════════════
   BOARD — div/CSS game board styles
   ═══════════════════════════════════════════ */

/* Legal source pulsing glow */
@keyframes legal-pulse {
  0%, 100% { box-shadow: 0 0 6px rgba(88, 20, 40, 0.25); }
  50% { box-shadow: 0 0 14px rgba(88, 20, 40, 0.5); }
}
.animate-legal-pulse {
  animation: legal-pulse 1.5s ease-in-out infinite;
}

/* Destination dot pulse */
@keyframes dest-pulse {
  0%, 100% { opacity: 0.7; transform: translateX(-50%) scale(1); }
  50% { opacity: 1; transform: translateX(-50%) scale(1.3); }
}
.animate-dest-pulse {
  animation: dest-pulse 1.2s ease-in-out infinite;
}

/* Checker fly animation (arc path) */
@keyframes checker-fly {
  0% { transform: translate(0, 0); }
  50% { transform: translate(calc(var(--fly-dx) * 0.5), calc(var(--fly-dy) * 0.5 - 40px)); }
  100% { transform: translate(var(--fly-dx), var(--fly-dy)); }
}

/* Slide-out menu */
@keyframes slide-in-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}
.animate-slide-in-right {
  animation: slide-in-right 200ms ease-out;
}

/* ─── Reduced motion support ─── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
